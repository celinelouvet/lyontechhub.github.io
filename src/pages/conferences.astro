---
import Layout from '../layouts/Layout.astro';

interface Conference {
    key: string;
    name: string;
    url: string;
    image: string;
    shortDescription: string;
    tags: string[];
}

const globFiles: Record<string, {default: Conference[]}> = import.meta.glob('../../data/conferences.json', { eager: true });
const conferences: Conference[] = globFiles['../../data/conferences.json'].default;
---

<Layout>
  <main>
    <div class="container is-fluid">
        <div class="container">
            <p class="title has-text-black">
                { conferences.length } conférences organisées par les communautés du LyonTechHub<br />
                <small><a href="/about">Par ici pour référencer la votre !</a></small>
            </p>
            <div class="field">
              <label class="label has-text-black" for="filterConferences">Rechercher</label>
              <div class="control">
                <input type="text" id="filterConferences" onkeyup="dynamicFilter('filterConferences')">
              </div>
            </div>
            <br />
            <br />
            <div class="columns is-multiline communitiesList">
                {conferences
                    .map(
                        (conference) => (
                            <div class="column is-12-mobile is-12-tablet filterable" data-key={conference.name}>
                                <div class="card has-background-white">
                                    <a href={conference.url} target="_blank">
                                        <div class="card-image">
                                            <figure>
                                                <img src={"/imgs/conferences/" + conference.image} onerror="this.onerror=null;this.src='/imgs/noLogo.png';" />
                                            </figure>
                                        </div>
                                    </a>
                                    <div class="card-content">
                                        <div class="media">
                                            <div class="media-content">
                                                <p class="title is-4 has-text-black">{conference.name}</p>
                                            </div>
                                        </div>
                                        <div class="content has-text-black">
                                            {conference.shortDescription}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )
                    )
                }
            </div>
        </div>
    </div>
  </main>
</Layout>
